@model MeterReaderCMS.Models.DTO.Notebook.EditNotebookDTO
@using System.Globalization;
@{
    ViewBag.Title = "עריכת פנקס";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12 title-section">
        <h2 class="main-page-title">@ViewBag.Title</h2>
    </div>
</div>

<div class="row">
    <div class="col-md-4 col-sm-12 col-xs-12">

        <div class="card mb-3">
            <div class="card-header text-right">
                פעמיים שהמסלול בוצע
                <i class="fa fa-table"></i>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                        <thead class="theader">
                            <tr class="tr-header">
                                <th class="th-header">לא נקרא </th>
                                <th class="th-header">נקרא</th>
                                <th class="th-header">תאריך</th>
                            </tr>
                        </thead>
                        <tbody class="tbody">

                            @foreach (var item in ViewBag.Tracks)
                            {
                                <tr>
                                    <td>@item.ElectricityMeterUnCalled</td>
                                    <td>@item.ElectricityMeterCalled</td>
                                    <td>@item.Date.ToString("dd/M/yyyy", CultureInfo.InvariantCulture)</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-8 col-sm-12 col-xs-12">
        @using (Html.BeginForm("EditNotebook", "Notebooks", FormMethod.Post, new
        {
            @id = "addNotebookFormId",
            @class = "form-horizontal",
            role = "form"
        }))
        {
            @Html.AntiForgeryToken()
            HtmlHelper.UnobtrusiveJavaScriptEnabled = true;

            <div class="form-horizontal">
                <div class="form-group">
                    @Html.LabelFor(model => model.Number, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10 text-right">
                        @Html.EditorFor(model => model.Number, new { htmlAttributes = new { @class = "form-control form-input" } })
                        @Html.ValidationMessageFor(model => model.Number, "", new { @class = "text-danger" })
                        @Html.ValidationMessage("CustomError", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.StreetName, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10 text-right">
                        @Html.EditorFor(model => model.StreetName, new { htmlAttributes = new { @class = "form-control form-input" } })
                        @Html.ValidationMessageFor(model => model.StreetName, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-12 form-buttons-section text-right">
                        @Html.ActionLink("חזרה לרשימה", "Index", null, new { @class = "btn btn-secondary" })
                        <input type="submit" value="עריכת פנקס" class="btn btn-primary" />
                    </div>
                </div>
            </div>
        }
    </div>
</div>

@section Scripts
{
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/track-custom-validator")
}